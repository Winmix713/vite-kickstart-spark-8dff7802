// components import Popup from '@components/Popup'; import {toast} from 'react-toastify'; // hooks import { useForm } from {useState} from 'react'; import {useAuth} from '@contexts/AuthContext'; // utils import classNames from 'classnames'; import PropTypes from 'prop-types'; const ResetPasswordPopup = ({open, onClose}) => { const[isSubmitting, setIsSubmitting] = useState(false); const {register, handleSubmit, formState, reset} = useForm(); const { resetPassword } = useAuth(); const handleClose = () => { reset(); onClose(); } const onSubmit = async (data) => { setIsSubmitting(true); try { await resetPassword(data.email); toast.success('Password reset link sent to ${data.email}'); handleClose(); } catch (error) { console.error('Reset password error:', error); toast.error(error.message || 'Failed to send reset email. Please try again.'); } finally { setIsSubmitting(false); } } return ( <Popup open={open} onClose={handleClose}> <div className="d-flex flex-column g-20"> <div className="d-flex flex-column g-10"> <h2>Reset Password</h2> <p> Enter your email address below and we'll send you a link to reset your password. </p> </div> <div className="d-flex flex-column g-16"> <form className="d-flex g-10" onSubmit={handleSubmit(onSubmit)}> <input className={classNames('field', {'field--error': errors.email})} type="text" placeholder="example@domain.com" {...register('email', {required: true, pattern: /^\S+@\S+$/i})} disabled={isSubmitting}/> <button className="btn" disabled={isSubmitting}> {isSubmitting ? 'Sending...' : 'Send'} </button> </form> <p className="text-12"> If you don't receive an email within a few minutes, please check your spam folder. </p> </div> </div> </Popup> ) } ResetPasswordPopup.propTypes = { open: PropTypes.bool.isRequired, onClose: PropTypes.func.isRequired } export default ResetPasswordPopup
