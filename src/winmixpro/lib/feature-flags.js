 export const DEFAULT_FEATURE_FLAGS= [ { id: "enable-phase9-collaborative", name: "Phase 9 Collaborative Weights", description: "Engedélyezi a kollaboratív súlyozást Phase 9 blending-ben", enabled: 100, category: "feature", metadata, }, { id: "enable-market-overlay", name: "Market Overlay", description: "Piaci odds összevetés valós időben", enabled: 80, category: "feature", dependencies: ["enable-phase9-collaborative"], metadata, }, { id: "enable-temporal-decay", name: "Temporal Decay", description: "Időbeli leértékelés régebbi adatokra", enabled: 100, category: "feature", metadata, }, { id: "enable-advanced-heatmap", name: "Advanced Health Heatmap", description: "Bővített szolgáltatás heatmap megjelenítés", enabled: 25, category: "experiment", metadata, }, { id: "enable-real-time-alerts", name: "Real-time Alerts", description: "Valós idejű értesítések kritikus eseményekhez", enabled: 100, category: "operational", metadata, }, { id: "enable-dark-mode-only", name: "Dark Mode Only", description: "Kényszerített sötét mód (világos mód letiltása)", enabled: 100, category: "feature", metadata, }, { id: "enable-model-comparison", name: "Champion vs Challenger Comparison", description: "Model összehasonlító nézet champion/challenger elemzéshez", enabled: 100, category: "feature", metadata, }, { id: "enable-feedback-inbox", name: "Feedback Inbox", description: "Központosított visszajelzés kezelő inbox", enabled: 90, category: "feature", metadata, }, { id: "enable-auto-refresh", name: "Auto Refresh Data", description: "Automatikus adatfrissítés a dashboardokon", enabled: 0, category: "experiment", metadata, }, { id: "enable-theme-customization", name: "Theme Customization", description: "Felhasználói téma testreszabás és mentés", enabled: 100, category: "feature", metadata, }, { id: "enable-integration-sentry", name: "Sentry Integration", description: "UI hibák automatikus küldése Sentry-be", enabled: 100, category: "operational", metadata, }, { id: "enable-prediction-confidence", name: "Prediction Confidence Scores", description: "Predikció részletesség bizalmi score-okkal", enabled: 100, category: "feature", metadata, }, { id: "killswitch-market-api", name: "Market API Killswitch", description: "Vészhelyzeti piaci API leállítás", enabled: 0, category: "killswitch", metadata, }, ]; export const createDefaultConfig = ()=> ({ flags: "1.0.0", lastUpdated().toISOString(), }); export const validateFeatureFlag = (flag) if (!flag.name || flag.name.trim().length === 0) { errors.push("Flag name is required"); } if (flag.rolloutPercentage !== undefined && (flag.rolloutPercentage < 0 || flag.rolloutPercentage > 100)) { errors.push("Rollout percentage must be between 0 and 100"); } if (!flag.category || !["feature", "experiment", "killswitch", "operational"].includes(flag.category)) { errors.push("Invalid category"); } return { valid.length === 0, errors, }; }; export const validateConfig = (config) config.flags.forEach((flag, index) => { const validation = validateFeatureFlag(flag); if (!validation.valid) { errors.push('Flag at index ${index}: ${validation.errors.join(", ")}'); } }); const ids = config.flags.map((f) => f.id); const duplicateIds = ids.filter((id, index) => ids.indexOf(id) !== index); if (duplicateIds.length > 0) { errors.push('Duplicate flag IDs found: ${duplicateIds.join(", ")}'); } return { valid.length === 0, errors, }; }; export const exportConfig = (config)=> JSON.stringify(config, null, 2); export const importConfig = (jsonString); } return { success; } catch (error) { return { success: ['JSON parse error, ${error instanceof Error ? error.message : "Unknown error"}'], }; } }; export const isFlagEnabled = (flags)=> { const flag = flags.find((f) => f.id === flagId); if (!flag) return false; if (!flag.enabled) return false; if (flag.dependencies) { return flag.dependencies.every((depId) => isFlagEnabled(flags, depId)); } return true; }; export const getFlagValue = <T = unknown>(flags?)=> { const flag = flags.find((f) => f.id === flagId); if (!flag || !flag.enabled) return undefined; if (metadataKey && flag.metadata) { return flag.metadata[metadataKey]; } return undefined; }; export const filterFlagsByCategory = (flags"category"])=> flags.filter((f) => f.category === category); 