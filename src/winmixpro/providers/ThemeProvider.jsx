import { createContext, useCallback, useEffect, type ReactNode } from 'react' import { useLocalStorage } from '@/winmixpro/hooks/useLocalStorage' import { applyTheme, exportThemeAsCSS, exportThemeAsJSON, getDefaultTheme, getThemeById, } from '@/winmixpro/lib/theme-manager' export const ThemeContext = createContext(null); export const ThemeProvider = ({ children }) => { const[currentThemeId, setCurrentThemeId] = useLocalStorage(STORAGE_KEYS.THEME, getDefaultTheme().id); const[favorites, setFavorites] = useLocalStorage(STORAGE_KEYS.THEME_FAVORITES, []); const currentTheme = getThemeById(currentThemeId) || getDefaultTheme(); useEffect(() => { applyTheme(currentTheme); }, [currentTheme]); const setTheme = useCallback( (themeId) => { const theme = getThemeById(themeId); if (theme) { setCurrentThemeId(themeId); } }, [setCurrentThemeId], ); const toggleFavorite = useCallback( (themeId) => { setFavorites((prev) => { if (prev.includes(themeId)) { return prev.filter((id) => id !== themeId); } return[...prev, themeId]; }); }, [setFavorites], ); const exportCSS = useCallback(() => exportThemeAsCSS(currentTheme), [currentTheme]); const exportJSON = useCallback(() => exportThemeAsJSON(currentTheme), [currentTheme]); const resetTheme = useCallback(() => { setCurrentThemeId(getDefaultTheme().id); setFavorites([]); }, [setCurrentThemeId, setFavorites]); const value= { currentTheme, setTheme, presets; return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>; }; 